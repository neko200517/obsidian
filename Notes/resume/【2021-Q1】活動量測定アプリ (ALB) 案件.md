## 基本情報

### 参画期間

2021年 / 1年以内

### プロジェクトカテゴリ

スマホアプリ / 受託開発 / その他

### 担当工程

- 要件定義
- コーディング
- データ分析

### 経験した職種・役割

- フロントエンド
- アプリ開発（iOS）
- アプリ開発（Android）

### 使用技術

- Python
- Java
- React Native
- JavaScript
- Redis など

### 開発メンバー

4名

## プロジェクトの詳細

### 概要

脳性麻痺患者の活動量測定のフィールドテスト（試験運用）プロジェクト

### 背景

脳性麻痺患者の後遺症改善として、自主的にリハビリに取り組んでいることが有効であると実証されている。  
従来はリハビリの効果を裏付けるものがなく、医療従事者による経験に大きく依存していた。  
リハビリ効果を客観的に「見える化」することで業務改善と患者のQOL改善に取り組むのが最終的な目的となっている。

### 目的 

本案件は実際に脳性麻痺患者に向けてシステムの試験運用を行い、そこで得たフィードバックをもとに製品化するための課題を評価するためのプロジェクトとなっている。

### 取り組み

脳性麻痺患者に小型デバイスを取り付け、そこで得られた座標データから活動量データを生成する。
小型デバイスのベンダにハードウェアの製作と組み込み処理を依頼するため、OSSのPythonコードの解析とJavaへの移植を担当した。
またスマホ画面で活動量を視覚化するためのネイティブアプリでのグラフコンポーネントの製造とテストを実施した。
その後グラフコンポーネント組み込みやその他各種画面の製造を担当し、単体テストと結合テスト、システムテストを実施してリリースした。

### 工夫した点

- 活動量計算ロジックの論文とPythonの活動量計算ロジックの関連を調査。
移植したデータに元ソースと乖離がないというエビデンスを貼り付けた上で、各処理のフローを視覚的に表現し、誰にでもわかる資料に落とし込んだ。
- ロジックの具体的な内容はデバイスで計測した30Hz(1秒30レコード)の加速度データ（x, y, z）にSciPyライブラリなどでバンドバスフィルタと移動平均フィルタをかけ余分なノイズを除去。しきい値を超える値を丸めて整数化し、さらに30レコードのデータを10レコードに間引いた配列にスライス。その10個の配列の値を積算したものが1分間のAC（アクティビティカウント）として上がってくる。更にその各座標ごとのAC値（acX + acY + acZ）を加算し、平方根を求めたものがVM（ベクターマグニチュード）値として算出される。以上のデータをpandasなどでCSV出力した。
- 上述ロジックのバンドパスフィルタに関しては互換性のあるOSSがなかなか見つからず、移植にあたり処理のまとまりごとに数千単位の値を出力し、Excelに値を貼り付けて近似しているか比較検証。最終的な出力がほぼ一致するものを選定した。
- エビデンスとして24時間分の864,000レコード（10レコード * 60秒 * 60分 * 24時間）の活動量を出力し、Pythonで出力したコードと移植したJavaのコードを比較するといった地道な検証作業の末HWベンダーに引き渡した。
- FontAwesomeだけでは足りないアイコンを当初pngで採用していたが、SVG化してビルドサイズを最小限にした。
- 結合テスト、システムテストに参画し、要件と基本設計書に基づいたテスト仕様書の作成を行った。
- Android, iOS, 独自端末とのシリアル通信を利用し、仕様書に基づいた検証作業を実施した。

### 成果

自身の担当した解析結果は他のメンバに共有され、それをもとにプロジェクトが進行している。先の長いプロジェクトだがブラックボックス化していた論文内容の解明はプロジェクトの前進に大きく寄与した。