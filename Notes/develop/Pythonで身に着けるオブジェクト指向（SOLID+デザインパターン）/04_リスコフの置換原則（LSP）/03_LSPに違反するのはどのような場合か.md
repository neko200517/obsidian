## 置換できないのはどのような場合か

次のいずれかが起こると基本型を派生型で置換できなくなる

1. 派生型で基本型よりも事前条件を強める 
2. 派生型で基本型よりも事後条件を弱める 
3. 派生型で基本型の不変条件に違反する
4. 派生型で基本型にはない例外が発生する（1と同じ）

事前条件・事後条件・不変条件は「契約による設計」の構成要素

## 契約による設計（Design by Contact：DbC）

呼び出される機能と呼び出し側が契約を結ぶ（と考える）ことで、ソフトウェアの正確性と頑健性を高める技法

契約による設計は次の3つの要素からなる

- 事前条件（precondition）：関数（メソッド）の開始時に保証されるべき条件
- 事後条件（postcondition）：関数（メソッド）の正常終了時に満たされるべき条件
- 不変条件（invariant）：関数（メソッド）の開始時と終了時に共通して保証されるべき状態についての条件。クラス不変表明。

呼び出される機能と呼び出される機能は次の契約を結ぶ 

> 呼び出し型によって呼び出される機能の事前条件がすべて満足された場合、当該機能は処理完了時点ですべての事後条件と不変表明を満足させるものとする。
