---
date: <% tp.date.now("YYYY-MM-DD") %>
tags:
  - NestJS
  - セキュリティ
aliases:
  - <% tp.file.title %>
---
## JWTとは

- JSON Web Token の略称で、JSONの形をした認証情報
- 電子証明より、改ざんの検知が可能
- 認証用トークンとして利用される

## JWTの構成

- 3つの要素から構成される
	- ヘッダ：ハッシュアルゴリズムの情報などのメタデータ
	- ペイロード：認証対象の情報で、ユーザー名やIDなど任意の情報
	- 署名：ヘッダとペイロードをエンコードしたものに秘密鍵を加えてハッシュ化したもの
- 要素ごとにBase64エンコードされている
- 3つの要素が . (ドット) で結合されている

### サンプル

![[Pasted image 20240609002043.png]]

## JWTを使った認証 

![[Pasted image 20240609002240.png]]

## JWTのメリット

- 署名が含まれているため、改ざんをチェックできる
- 有効期限をつけるなど、セキュアなToken発行を行える
- セッションと異なり、状態をサーバーで管理する必要がない
- 任意のデータをTokenに含めることができる